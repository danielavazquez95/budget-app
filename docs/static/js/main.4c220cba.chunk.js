(this["webpackJsonpbudget-app"]=this["webpackJsonpbudget-app"]||[]).push([[0],{20:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),s=a(25),r=a.n(s),o=a(6),i=Object(c.createContext)(),l=a(7),d=a(2),j=function(e){var t=Object(c.useState)(!1),a=Object(o.a)(t,2),s=a[0],r=a[1],d=Object(c.useContext)(i),j=d.userToken,u=d.setUserToken,m=d.username,b=d.setUsername,p=function(){return r(!s)};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"navbar nav-mobile d-sm-block d-md-none bg-dark",onClick:p,children:Object(n.jsx)("div",{className:"menu-bars",children:Object(n.jsx)("i",{className:"fas fa-bars d-md-none mx-3",onClick:p})})}),Object(n.jsx)("nav",{className:s?"nav-menu active bg-dark d-sm-block d-md-none":"nav-menu  bg-dark d-sm-block d-md-none",onClick:p,children:Object(n.jsx)("ul",{className:"nav-menu-items",onClick:p,children:Object(n.jsx)("li",{className:"navbar-toggle bg-dark d-block",children:j.success?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("span",{className:"nav-text text-white mx-2 py-0",children:m||JSON.parse(localStorage.getItem("username"))}),Object(n.jsx)(l.c,{activeClassName:"active",className:"menu-bars nav-text text-danger py-0",to:"#",onClick:function(){u({}),b(""),localStorage.clear()},children:"Log out"})]}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(l.c,{activeClassName:"active",className:"menu-bars nav-text",exact:!0,to:"/auth/register",children:"Sign up"}),Object(n.jsx)(l.c,{activeClassName:"active",className:"menu-bars nav-text",exact:!0,to:"/auth/login",children:"Log in"})]})})})})]})},u=function(e){var t=Object(c.useContext)(i),a=t.userToken,s=t.setUserToken,r=t.username,o=t.setUsername;return Object(n.jsxs)("div",{children:[Object(n.jsx)(j,{}),Object(n.jsx)("nav",{className:"navbar navbar-expand-sm navbar-dark bg-dark d-none d-md-flex",children:Object(n.jsx)("div",{className:"collapse navbar-collapse justify-content-end mx-5",id:"navbarNav",children:a.success?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("span",{className:"text-white d-none d-md-inline",children:[" ",r||JSON.parse(localStorage.getItem("username"))]}),Object(n.jsx)(l.c,{activeClassName:"active",className:"nav-item nav-link text-danger d-none d-md-inline",to:"#",onClick:function(){s({}),o(""),localStorage.clear()},children:"Log out"})]}):Object(n.jsxs)("ul",{className:"navbar-nav",children:[Object(n.jsx)(l.c,{activeClassName:"active",className:"nav-item nav-link d-none d-md-inline",exact:!0,to:"/auth/register",children:"Sign up"}),Object(n.jsx)(l.c,{activeClassName:"active",className:"nav-item nav-link d-none d-md-inline",exact:!0,to:"/auth/login",children:"Log in"})]})})})]})},m=a(11),b=a(3),p=a(5),h=a.n(p),x=a(15),O=a.n(x),f=a(23),g=function(){var e=Object(f.a)(O.a.mark((function e(t,a){var n,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://budget-apirest.herokuapp.com/api/operations/".concat(a),{mode:"cors",headers:{"user-token":t}});case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),v=function(){var e=Object(f.a)(O.a.mark((function e(t){var a,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://budget-apirest.herokuapp.com/api/users/login",{method:"POST",mode:"cors",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e={username:"",email:"",password:""},t=Object(c.useState)(e),a=Object(o.a)(t,2),s=a[0],r=a[1],j=Object(c.useContext)(i),u=j.setUserToken,p=j.setUsername,x=Object(d.g)(),O=function(e){r(Object(b.a)(Object(b.a)({},s),{},Object(m.a)({},e.target.name,e.target.value)))};return Object(n.jsx)("div",{className:"container",children:Object(n.jsx)("div",{className:"row justify-content-center",children:Object(n.jsx)("div",{className:"col-11 col-sm-8 col-md-6 col-lg-5 col-xl-4 mt-5 mb-1 ",children:Object(n.jsxs)("form",{className:"form-container form-screen",onSubmit:function(t){var a;t.preventDefault(),(0===(a=s).username.trim().length?(h.a.fire({icon:"error",title:"Error",text:"Username is required"}),0):0===a.email.trim().length?(h.a.fire({icon:"error",title:"Error",text:"Email is required"}),0):0!==a.password.trim().length||(h.a.fire({icon:"error",title:"Error",text:"Password is required"}),0))&&v(s).then((function(t){t.success?(u(t),p(s.username),localStorage.setItem("data",JSON.stringify(t)),localStorage.setItem("username",JSON.stringify(s.username)),r(e),x.push("/")):h.a.fire({icon:"error",title:"Error",text:"There was a problem loging in to your account. Check that your email address and password are spelled correctly."})}))},children:[Object(n.jsx)("h1",{className:"text-center",children:"Log in to your account!"}),Object(n.jsx)("hr",{}),Object(n.jsx)("label",{children:"Username:"}),Object(n.jsx)("input",{type:"text",name:"username",className:"form-control my-3",autoComplete:"off",onChange:O}),Object(n.jsx)("label",{children:"Email:"}),Object(n.jsx)("input",{type:"text",name:"email",className:"form-control my-3",autoComplete:"off",onChange:O}),Object(n.jsx)("label",{children:"Password:"}),Object(n.jsx)("input",{type:"password",name:"password",className:"form-control my-3",autoComplete:"off",onChange:O}),Object(n.jsxs)("div",{className:"d-grid gap-2",children:[Object(n.jsx)("button",{type:"submit",className:"btn btn-success btn-block my-3",autoComplete:"off",children:"Log in"}),Object(n.jsx)("hr",{}),Object(n.jsx)(l.b,{className:"text-center",to:"/auth/register",children:" Don't have an account? Sign up "})]})]})})})})},y=function(){var e={username:"",email:"",password:"",password2:""},t=Object(c.useState)(e),a=Object(o.a)(t,2),s=a[0],r=a[1],i=Object(d.g)(),j=function(e){r(Object(b.a)(Object(b.a)({},s),{},Object(m.a)({},e.target.name,e.target.value)))};return Object(n.jsx)("div",{className:"container",children:Object(n.jsx)("div",{className:"row justify-content-center",children:Object(n.jsx)("div",{className:"col-11 col-sm-8 col-md-6 col-lg-5 col-xl-4 mt-5 mb-1",children:Object(n.jsxs)("form",{className:"form-container form-screen",onSubmit:function(t){var a;t.preventDefault(),(0===(a=s).username.trim().length?(h.a.fire({icon:"error",title:"Error",text:"Username is required"}),0):0===a.email?(h.a.fire({icon:"error",title:"Error",text:"Email is required"}),0):0===a.password.length?(h.a.fire({icon:"error",title:"Error",text:"Password is required"}),0):0!==a.password2.length&&a.password2===a.password||(h.a.fire({icon:"error",title:"Error",text:"Password is incorrect"}),0))&&(!function(e){fetch("https://budget-apirest.herokuapp.com/api/users/register",{method:"POST",mode:"cors",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})}(s),r(e),h.a.fire({icon:"success",title:"Success",text:"Your account was successfully registered"}),i.push("/auth/login"))},children:[Object(n.jsx)("h1",{className:"text-center",children:"Sign up to get started"}),Object(n.jsx)("hr",{}),Object(n.jsx)("label",{children:"Username:"}),Object(n.jsx)("input",{type:"text",name:"username",className:"form-control my-3",autoComplete:"off",onChange:j}),Object(n.jsx)("label",{children:"Email:"}),Object(n.jsx)("input",{type:"text",name:"email",className:"form-control my-3",autoComplete:"off",onChange:j}),Object(n.jsx)("label",{children:"Password:"}),Object(n.jsx)("input",{type:"password",name:"password",className:"form-control my-3",autoComplete:"off",onChange:j}),Object(n.jsx)("label",{children:"Confirm password:"}),Object(n.jsx)("input",{type:"password",name:"password2",className:"form-control my-3",autoComplete:"off",onChange:j}),Object(n.jsxs)("div",{className:"d-grid gap-2",children:[Object(n.jsx)("button",{type:"submit",className:"btn btn-success btn-block my-3",autoComplete:"off",children:"Sign up"}),Object(n.jsx)("hr",{}),Object(n.jsx)(l.b,{className:"text-center",to:"/auth/login",children:" Already have an account? "})]})]})})})})},C=function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(d.b,{exact:!0,path:"/auth/login",component:N}),Object(n.jsx)(d.b,{exact:!0,path:"/auth/register",component:y})]})},k=a(17),S=function(e){var t=e.operation,a=e.handleDeleteOperation,s=e.handleUpdateOperation,r=e.layout,l=Object(c.useState)(!0),d=Object(o.a)(l,2),j=d[0],u=d[1],p=Object(c.useState)({concept:t.concept,price:t.price,date:t.date}),h=Object(o.a)(p,2),x=h[0],O=h[1],f=Object(c.useContext)(i).userToken,g=function(e){O(Object(b.a)(Object(b.a)({},x),{},Object(m.a)({},e.target.name,e.target.value)))};return Object(n.jsxs)("div",{className:"container ".concat(r," p-3 card-operation "),children:[Object(n.jsxs)("div",{className:"row mb-3",children:[Object(n.jsx)("input",{className:"form-control input-operation pt-1 mb-2 text-center font-weight-bold",name:"concept",defaultValue:t.concept,disabled:j,onChange:g}),Object(n.jsx)("label",{className:"col-4 col-form-label text-right pe-2 py-0",children:"Price: "}),Object(n.jsxs)("div",{className:"col-8 d-flex",children:[Object(n.jsx)("span",{className:"text-dark",children:"$"})," ",Object(n.jsx)("input",{type:"number",className:"form-control input-operation px-2 py-0",name:"price",defaultValue:t.price,disabled:j,onChange:g})]}),Object(n.jsx)("label",{className:"col-4 col-form-label text-right pe-2 py-0",children:"Date: "}),Object(n.jsx)("div",{className:"col-8 pt-1",children:Object(n.jsx)("input",{type:"date",className:"form-control input-operation px-2 py-0",name:"date",defaultValue:t.date,disabled:j,onChange:g})}),Object(n.jsx)("label",{className:"col-4 col-form-label text-right pe-2 py-0",children:"Type: "}),Object(n.jsx)("div",{className:"col-8 pt-1",children:Object(n.jsx)("input",{className:"form-control input-operation pe-2 py-0",name:"type",defaultValue:t.type,disabled:!0,onChange:g})})]}),Object(n.jsx)("i",{className:"delete-icon far fa-trash-alt ps-1 pb-2",onClick:function(){var e,n;e=f.success,n=t.id,fetch("https://budget-apirest.herokuapp.com/api/operations/".concat(n),{method:"DELETE",mode:"cors",headers:{"user-token":e}}),a(t)}}),Object(n.jsx)("i",{className:"edit-icon far fa-edit ps-2 pb-2 ",onClick:function(){u(!j)}}),Object(n.jsx)("button",{type:"button",className:"btn btn-success btn-sm ms-5 ".concat(j&&"d-none"),onClick:function(){!function(e,t,a){fetch("https://budget-apirest.herokuapp.com/api/operations/".concat(t),{method:"PUT",mode:"cors",body:JSON.stringify(a),headers:{"user-token":e,"Content-Type":"application/json"}})}(f.success,t.id,x),s(t.id,x),u(!j)},children:"Save"})]})},w=function(e){var t=e.operationsData,a=e.handleDeleteOperation,c=e.handleUpdateOperation,s=e.loadingStatus,r=t.length<10?t:t.slice(-10),o=r.filter((function(e){return"Entry"===e.type})),i=r.filter((function(e){return"Expense"===e.type})),l=function(){var e=0,t=0;return o.forEach((function(t){return e+=Number(t.price)})),i.forEach((function(e){return t+=Number(e.price)})),e-t},d=function(){return l()>0||!(l()<0)&&"equal"};return Object(n.jsx)("div",{className:"col mt-5 mb-5",children:Object(n.jsxs)("div",{className:"form-container",children:[Object(n.jsxs)("h3",{className:"text-center",children:["Current balance:",Object(n.jsx)("span",{className:"text-center ".concat("equal"===d()||(d()?"text-success":"text-danger")),children:" $".concat(l())})]}),Object(n.jsx)("hr",{}),Object(n.jsx)("h4",{className:"text-center",children:"Operations"}),Object(n.jsx)("hr",{}),s?Object(n.jsx)("h4",{className:"animate__animated animate__flash d-block text-center",children:"Loading..."}):Object(n.jsxs)("div",{className:"row",children:[Object(n.jsxs)("div",{className:"col",children:[Object(n.jsx)("h4",{className:"text-center pb-2",children:"Entry"}),o.map((function(e){return Object(n.jsx)(S,{operation:e,handleDeleteOperation:a,handleUpdateOperation:c,layout:"alert alert-primary p-1"},e.id)}))]}),Object(n.jsxs)("div",{className:"col",children:[Object(n.jsx)("h4",{className:"text-center pb-2",children:"Expenses"}),i.map((function(e){return Object(n.jsx)(S,{operation:e,handleDeleteOperation:a,handleUpdateOperation:c,layout:"alert alert-danger p-1"},e.id)}))]})]})]})})},E=function(e){var t=e.handleNewOperation,a=Object(c.useContext)(i).userToken,s={id:Math.floor(100*Math.random()),concept:"",price:null,date:"",type:"Click to select",userId:JSON.parse(localStorage.getItem("data")).id},r=Object(c.useState)(s),l=Object(o.a)(r,2),d=l[0],j=l[1],u=Object(c.useRef)(null);return Object(n.jsx)("div",{className:" col-sm-8 col-lg-4 mt-5",children:Object(n.jsxs)("form",{className:"form-container",ref:u,onSubmit:function(e){var n,c,r;e.preventDefault(),(0===(r=d).concept.trim().length?(h.a.fire({icon:"error",title:"Error",text:"Concept is required"}),0):null===r.price?(h.a.fire({icon:"error",title:"Error",text:"Price is required"}),0):0===r.date.length?(h.a.fire({icon:"error",title:"Error",text:"Date is required"}),0):"Click to select"!==r.type||(h.a.fire({icon:"error",title:"Error",text:"Type is required"}),0))&&(t(d),n=a.success,c=d,fetch("https://budget-apirest.herokuapp.com/api/operations",{method:"POST",mode:"cors",body:JSON.stringify(c),headers:{"user-token":n,"Content-Type":"application/json"}}),u.current.reset(),j(s))},children:[Object(n.jsx)("h1",{className:"text-center",children:"Add new operation"}),Object(n.jsx)("hr",{}),Object(n.jsx)("label",{children:"Concept:"}),Object(n.jsx)("input",{type:"text",name:"concept",className:"form-control my-3",autoComplete:"off",onChange:function(e){return j(Object(b.a)(Object(b.a)({},d),{},{concept:e.target.value}))}}),Object(n.jsx)("label",{children:"Price:"}),Object(n.jsx)("input",{type:"number",name:"price",className:"form-control my-3",autoComplete:"off",onChange:function(e){return j(Object(b.a)(Object(b.a)({},d),{},{price:e.target.value}))}}),Object(n.jsx)("label",{children:"Date:"}),Object(n.jsx)("input",{type:"date",name:"date",className:"form-control my-3",autoComplete:"off",onChange:function(e){return j(Object(b.a)(Object(b.a)({},d),{},{date:e.target.value}))}}),Object(n.jsx)("label",{children:"Type:"}),Object(n.jsxs)("select",{className:"form-control my-3",onChange:function(e){return j(Object(b.a)(Object(b.a)({},d),{},{type:e.target.value}))},children:[Object(n.jsx)("option",{children:"Click to select"}),Object(n.jsx)("option",{children:"Entry"}),Object(n.jsx)("option",{children:"Expense"})]}),Object(n.jsx)("div",{className:"d-grid gap-2",children:Object(n.jsx)("button",{type:"submit",className:"btn btn-success btn-block my-3",autoComplete:"off",children:"Add operation"})})]})})},T=function(){var e=Object(c.useContext)(i),t=e.userToken,a=e.loadingStatus,s=e.setLoadingStatus,r=Object(c.useState)([]),l=Object(o.a)(r,2),j=l[0],u=l[1];Object(c.useEffect)((function(){t.success&&g(t.success,t.id).then((function(e){u(e),s(!1)}))}),[t.success,t.id]);return Object(n.jsx)(n.Fragment,{children:t.success||localStorage.getItem("data")?Object(n.jsx)("div",{className:"container box",children:Object(n.jsxs)("div",{className:"row justify-content-center",children:[Object(n.jsx)(E,{handleNewOperation:function(e){u([].concat(Object(k.a)(j),[e]))}}),Object(n.jsx)(w,{operationsData:j,handleDeleteOperation:function(e){var t=Object(k.a)(j).filter((function(t){return t.id!==e.id}));u(t)},handleUpdateOperation:function(e,t){var a=j.findIndex((function(t){return t.id===e})),n=Object(k.a)(j);n[a]=Object(b.a)(Object(b.a)({},n[a]),{},{concept:t.concept,price:t.price,date:t.date}),u(n)},loadingStatus:a})]})}):Object(n.jsx)(d.a,{to:"/auth/login"})})},U=function(){return Object(n.jsx)("div",{className:"footer",children:Object(n.jsx)("footer",{className:" bg-dark py-4",children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"col text-center",children:[Object(n.jsx)("h5",{className:"text-white d-inline",children:"Created and designed by Daniela Vazquez - \xa92021"}),Object(n.jsx)("br",{}),Object(n.jsx)("label",{className:"text-white d-inline text-secondary",children:" Buenos Aires - Argentina "}),Object(n.jsx)("hr",{className:"w-50"})]})}),Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"col text-center",children:[Object(n.jsx)("a",{className:"nav-item nav-link d-inline text-white",href:"https://github.com/danielavazquez95",target:"_blank",children:Object(n.jsx)("i",{className:"fab fa-github"})}),Object(n.jsx)("a",{className:"nav-item nav-link d-inline text-white",href:"mailto:danielavazquez95@gmail.com",target:"_blank",children:Object(n.jsx)("i",{className:"far fa-envelope"})})]})})]})})})},D=(a(20),function(){var e=Object(c.useContext)(i).setUserToken;return Object(c.useEffect)((function(){localStorage.getItem("data")&&e(JSON.parse(localStorage.getItem("data")))}),[]),Object(n.jsxs)(l.a,{basename:"/",children:[Object(n.jsxs)("div",{className:"home-screen",children:[Object(n.jsx)(u,{}),Object(n.jsxs)(d.d,{children:[Object(n.jsx)(d.b,{path:"/auth",component:C}),Object(n.jsx)(d.b,{exact:!0,path:"/",component:T}),Object(n.jsx)(d.a,{to:"/auth"})]})]}),Object(n.jsx)(U,{})]})}),q=function(){var e=Object(c.useState)({}),t=Object(o.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)(!0),l=Object(o.a)(r,2),d=l[0],j=l[1],u=Object(c.useState)(""),m=Object(o.a)(u,2),b=m[0],p=m[1];return Object(n.jsx)(i.Provider,{value:{userToken:a,setUserToken:s,loadingStatus:d,setLoadingStatus:j,username:b,setUsername:p},children:Object(n.jsx)(D,{})})};r.a.render(Object(n.jsx)(q,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.4c220cba.chunk.js.map