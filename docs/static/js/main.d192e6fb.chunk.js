(this["webpackJsonpbudget-app"]=this["webpackJsonpbudget-app"]||[]).push([[0],{19:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(1),s=a(25),r=a.n(s),o=a(7),i=Object(n.createContext)(),l=a(6),j=a(2),d=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),s=a[0],r=a[1],j=Object(n.useContext)(i),d=j.userToken,u=j.setUserToken,b=function(){return r(!s)};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"navbar nav-mobile d-sm-block d-md-none bg-dark",onClick:b,children:Object(c.jsx)("div",{className:"menu-bars",children:Object(c.jsx)("i",{className:"fas fa-bars d-md-none mx-3",onClick:b})})}),Object(c.jsx)("nav",{className:s?"nav-menu active bg-dark d-sm-block d-md-none":"nav-menu  bg-dark d-sm-block d-md-none",onClick:b,children:Object(c.jsx)("ul",{className:"nav-menu-items",onClick:b,children:Object(c.jsx)("li",{className:"navbar-toggle bg-dark d-block",children:d.success?Object(c.jsx)(l.c,{activeClassName:"active",className:"menu-bars nav-text text-danger",to:"#",onClick:function(){u({}),localStorage.clear()},children:"Log out"}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(l.c,{activeClassName:"active",className:"menu-bars nav-text",exact:!0,to:"/auth/register",children:"Sign in"}),Object(c.jsx)(l.c,{activeClassName:"active",className:"menu-bars nav-text",exact:!0,to:"/auth/login",children:"Log in"})]})})})})]})},u=function(e){var t=Object(n.useContext)(i),a=t.userToken,s=t.setUserToken;return Object(c.jsxs)("div",{children:[Object(c.jsx)(d,{}),Object(c.jsx)("nav",{className:"navbar navbar-expand-sm navbar-dark bg-dark d-none d-md-flex",children:Object(c.jsx)("div",{className:"collapse navbar-collapse justify-content-end mx-5",id:"navbarNav",children:a.success?Object(c.jsx)(l.c,{activeClassName:"active",className:"nav-item nav-link text-danger d-none d-md-inline",to:"#",onClick:function(){s({}),localStorage.clear()},children:"Log out"}):Object(c.jsxs)("ul",{className:"navbar-nav",children:[Object(c.jsx)(l.c,{activeClassName:"active",className:"nav-item nav-link d-none d-md-inline",exact:!0,to:"/auth/register",children:"Sign up"}),Object(c.jsx)(l.c,{activeClassName:"active",className:"nav-item nav-link d-none d-md-inline",exact:!0,to:"/auth/login",children:"Log in"})]})})})]})},b=a(11),m=a(5),p=a(4),h=a.n(p),x=a(15),O=a.n(x),f=a(22),g=function(){var e=Object(f.a)(O.a.mark((function e(t,a){var c,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://budget-apirest.herokuapp.com/api/operations/".concat(a),{mode:"cors",headers:{"user-token":t}});case 2:return c=e.sent,e.next=5,c.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),v=function(){var e=Object(f.a)(O.a.mark((function e(t){var a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://budget-apirest.herokuapp.com/api/users/login",{method:"POST",mode:"cors",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e={username:"",email:"",password:""},t=Object(n.useState)(e),a=Object(o.a)(t,2),s=a[0],r=a[1],d=Object(n.useContext)(i).setUserToken,u=Object(j.g)(),p=function(e){r(Object(m.a)(Object(m.a)({},s),{},Object(b.a)({},e.target.name,e.target.value)))};return Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{className:"row justify-content-center",children:Object(c.jsx)("div",{className:"col-11 col-sm-8 col-md-6 col-lg-5 col-xl-4 mt-5 mb-1 ",children:Object(c.jsxs)("form",{className:"form-container form-screen",onSubmit:function(t){var a;t.preventDefault(),(0===(a=s).username.trim().length?(h.a.fire({icon:"error",title:"Error",text:"Username is required"}),0):0===a.email.trim().length?(h.a.fire({icon:"error",title:"Error",text:"Email is required"}),0):0!==a.password.trim().length||(h.a.fire({icon:"error",title:"Error",text:"Password is required"}),0))&&v(s).then((function(t){t.success?(d(t),localStorage.setItem("data",JSON.stringify(t)),r(e),u.push("/")):h.a.fire({icon:"error",title:"Error",text:"There was a problem creating your account. Check that your email address is spelled correctly"})}))},children:[Object(c.jsx)("h1",{className:"text-center",children:"Log in to your account!"}),Object(c.jsx)("hr",{}),Object(c.jsx)("label",{children:"Username:"}),Object(c.jsx)("input",{type:"text",name:"username",className:"form-control my-3",autoComplete:"off",onChange:p}),Object(c.jsx)("label",{children:"Email:"}),Object(c.jsx)("input",{type:"text",name:"email",className:"form-control my-3",autoComplete:"off",onChange:p}),Object(c.jsx)("label",{children:"Password:"}),Object(c.jsx)("input",{type:"password",name:"password",className:"form-control my-3",autoComplete:"off",onChange:p}),Object(c.jsxs)("div",{className:"d-grid gap-2",children:[Object(c.jsx)("button",{type:"submit",className:"btn btn-success btn-block my-3",autoComplete:"off",children:"Log in"}),Object(c.jsx)("hr",{}),Object(c.jsx)(l.b,{className:"text-center",to:"/auth/register",children:" Don't have an account? Sign up "})]})]})})})})},y=function(){var e={username:"",email:"",password:"",password2:""},t=Object(n.useState)(e),a=Object(o.a)(t,2),s=a[0],r=a[1],i=Object(j.g)(),d=function(e){r(Object(m.a)(Object(m.a)({},s),{},Object(b.a)({},e.target.name,e.target.value)))};return Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{className:"row justify-content-center",children:Object(c.jsx)("div",{className:"col-11 col-sm-8 col-md-6 col-lg-5 col-xl-4 mt-5 mb-1",children:Object(c.jsxs)("form",{className:"form-container form-screen",onSubmit:function(t){var a;t.preventDefault(),(0===(a=s).username.trim().length?(h.a.fire({icon:"error",title:"Error",text:"Username is required"}),0):0===a.email?(h.a.fire({icon:"error",title:"Error",text:"Email is required"}),0):0===a.password.length?(h.a.fire({icon:"error",title:"Error",text:"Password is required"}),0):0!==a.password2.length&&a.password2===a.password||(h.a.fire({icon:"error",title:"Error",text:"Password is incorrect"}),0))&&(!function(e){fetch("https://budget-apirest.herokuapp.com/api/users/register",{method:"POST",mode:"cors",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})}(s),r(e),h.a.fire({icon:"success",title:"Error",text:"Your account was successfully registered"}),i.push("/auth/login"))},children:[Object(c.jsx)("h1",{className:"text-center",children:"Sign up to get started"}),Object(c.jsx)("hr",{}),Object(c.jsx)("label",{children:"Username:"}),Object(c.jsx)("input",{type:"text",name:"username",className:"form-control my-3",autoComplete:"off",onChange:d}),Object(c.jsx)("label",{children:"Email:"}),Object(c.jsx)("input",{type:"text",name:"email",className:"form-control my-3",autoComplete:"off",onChange:d}),Object(c.jsx)("label",{children:"Password:"}),Object(c.jsx)("input",{type:"password",name:"password",className:"form-control my-3",autoComplete:"off",onChange:d}),Object(c.jsx)("label",{children:"Confirm password:"}),Object(c.jsx)("input",{type:"password",name:"password2",className:"form-control my-3",autoComplete:"off",onChange:d}),Object(c.jsxs)("div",{className:"d-grid gap-2",children:[Object(c.jsx)("button",{type:"submit",className:"btn btn-success btn-block my-3",autoComplete:"off",children:"Sign up"}),Object(c.jsx)("hr",{}),Object(c.jsx)(l.b,{className:"text-center",to:"/auth/login",children:" Already have an account? "})]})]})})})})},C=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(j.b,{exact:!0,path:"/auth/login",component:N}),Object(c.jsx)(j.b,{exact:!0,path:"/auth/register",component:y})]})},k=a(23),w=function(e){var t=e.operation,a=e.handleDeleteOperation,s=e.layout,r=Object(n.useState)(!0),l=Object(o.a)(r,2),j=l[0],d=l[1],u=Object(n.useState)({concept:t.concept,price:t.price,date:t.date}),p=Object(o.a)(u,2),h=p[0],x=p[1],O=Object(n.useContext)(i).userToken,f=function(e){x(Object(m.a)(Object(m.a)({},h),{},Object(b.a)({},e.target.name,e.target.value)))};return Object(c.jsxs)("div",{className:"container ".concat(s," p-3 card-operation "),children:[Object(c.jsxs)("div",{className:"row mb-3",children:[Object(c.jsx)("input",{className:"form-control input-operation pt-1 mb-2 text-center font-weight-bold",name:"concept",defaultValue:t.concept,disabled:j,onChange:f}),Object(c.jsx)("label",{className:"col-4 col-form-label text-right pe-2 py-0",children:"Price: "}),Object(c.jsxs)("div",{className:"col-8 d-flex",children:[Object(c.jsx)("span",{className:"text-dark",children:"$"})," ",Object(c.jsx)("input",{type:"number",className:"form-control input-operation px-2 py-0",name:"price",defaultValue:t.price,disabled:j,onChange:f})]}),Object(c.jsx)("label",{className:"col-4 col-form-label text-right pe-2 py-0",children:"Date: "}),Object(c.jsx)("div",{className:"col-8 pt-1",children:Object(c.jsx)("input",{type:"date",className:"form-control input-operation px-2 py-0",name:"date",defaultValue:t.date,disabled:j,onChange:f})}),Object(c.jsx)("label",{className:"col-4 col-form-label text-right pe-2 py-0",children:"Type: "}),Object(c.jsx)("div",{className:"col-8 pt-1",children:Object(c.jsx)("input",{className:"form-control input-operation pe-2 py-0",name:"type",defaultValue:t.type,disabled:!0,onChange:f})})]}),Object(c.jsx)("i",{className:"delete-icon far fa-trash-alt ps-1 pb-2",onClick:function(){var e,c;e=O.success,c=t.id,console.log("id en delete",c),fetch("https://budget-apirest.herokuapp.com/api/operations/".concat(c),{method:"DELETE",mode:"cors",headers:{"user-token":e}}),a(t)}}),Object(c.jsx)("i",{className:"edit-icon far fa-edit ps-2 pb-2 ",onClick:function(){d(!j)}}),Object(c.jsx)("button",{type:"button",className:"btn btn-success btn-sm ms-5 ".concat(j&&"d-none"),onClick:function(){!function(e,t,a){fetch("https://budget-apirest.herokuapp.com/api/operations/".concat(t),{method:"PUT",mode:"cors",body:JSON.stringify(a),headers:{"user-token":e,"Content-Type":"application/json"}})}(O.success,t.id,h),d(!j)},children:"Save"})]})},S=function(e){var t=e.operationsData,a=e.handleDeleteOperation,n=e.loadingStatus,s=t.length<10?t:t.slice(-10),r=s.filter((function(e){return"Entry"===e.type})),o=s.filter((function(e){return"Expense"===e.type})),i=function(){var e=0,t=0;return r.forEach((function(t){return e+=Number(t.price)})),o.forEach((function(e){return t+=Number(e.price)})),e-t},l=function(){return i()>0||!(i()<0)&&"equal"};return Object(c.jsx)("div",{className:"col mt-5 mb-5",children:Object(c.jsxs)("div",{className:"form-container",children:[Object(c.jsxs)("h3",{className:"text-center",children:["Current balance:",Object(c.jsx)("span",{className:"text-center ".concat("equal"===l()||(l()?"text-success":"text-danger")),children:" $".concat(i())})]}),Object(c.jsx)("hr",{}),Object(c.jsx)("h4",{className:"text-center",children:"Operations"}),Object(c.jsx)("hr",{}),n?Object(c.jsx)("h4",{className:"animate__animated animate__flash d-block text-center",children:"Loading..."}):Object(c.jsxs)("div",{className:"row",children:[Object(c.jsxs)("div",{className:"col",children:[Object(c.jsx)("h4",{className:"text-center pb-2",children:"Entry"}),r.map((function(e){return Object(c.jsx)(w,{operation:e,handleDeleteOperation:a,layout:"alert alert-primary p-1"},e.id)}))]}),Object(c.jsxs)("div",{className:"col",children:[Object(c.jsx)("h4",{className:"text-center pb-2",children:"Expenses"}),o.map((function(e){return Object(c.jsx)(w,{operation:e,handleDeleteOperation:a,layout:"alert alert-danger p-1"},e.id)}))]})]})]})})},E=function(e){var t=e.handleNewOperation,a=Object(n.useContext)(i).userToken,s={id:Math.floor(100*Math.random()),concept:"",price:null,date:"",type:"Click to select",userId:JSON.parse(localStorage.getItem("data")).id},r=Object(n.useState)(s),l=Object(o.a)(r,2),j=l[0],d=l[1],u=Object(n.useRef)(null);return Object(c.jsx)("div",{className:" col-sm-8 col-lg-4 mt-5",children:Object(c.jsxs)("form",{className:"form-container",ref:u,onSubmit:function(e){var c,n,r;e.preventDefault(),(0===(r=j).concept.trim().length?(h.a.fire({icon:"error",title:"Error",text:"Concept is required"}),0):null===r.price?(h.a.fire({icon:"error",title:"Error",text:"Price is required"}),0):0===r.date.length?(h.a.fire({icon:"error",title:"Error",text:"Date is required"}),0):"Click to select"!==r.type||(h.a.fire({icon:"error",title:"Error",text:"Type is required"}),0))&&(t(j),c=a.success,n=j,fetch("https://budget-apirest.herokuapp.com/api/operations",{method:"POST",mode:"cors",body:JSON.stringify(n),headers:{"user-token":c,"Content-Type":"application/json"}}),u.current.reset(),d(s))},children:[Object(c.jsx)("h1",{className:"text-center",children:"Add new operation"}),Object(c.jsx)("hr",{}),Object(c.jsx)("label",{children:"Concept:"}),Object(c.jsx)("input",{type:"text",name:"concept",className:"form-control my-3",autoComplete:"off",onChange:function(e){return d(Object(m.a)(Object(m.a)({},j),{},{concept:e.target.value}))}}),Object(c.jsx)("label",{children:"Price:"}),Object(c.jsx)("input",{type:"number",name:"price",className:"form-control my-3",autoComplete:"off",onChange:function(e){return d(Object(m.a)(Object(m.a)({},j),{},{price:e.target.value}))}}),Object(c.jsx)("label",{children:"Date:"}),Object(c.jsx)("input",{type:"date",name:"date",className:"form-control my-3",autoComplete:"off",onChange:function(e){return d(Object(m.a)(Object(m.a)({},j),{},{date:e.target.value}))}}),Object(c.jsx)("label",{children:"Type:"}),Object(c.jsxs)("select",{className:"form-control my-3",onChange:function(e){return d(Object(m.a)(Object(m.a)({},j),{},{type:e.target.value}))},children:[Object(c.jsx)("option",{children:"Click to select"}),Object(c.jsx)("option",{children:"Entry"}),Object(c.jsx)("option",{children:"Expense"})]}),Object(c.jsx)("div",{className:"d-grid gap-2",children:Object(c.jsx)("button",{type:"submit",className:"btn btn-success btn-block my-3",autoComplete:"off",children:"Add operation"})})]})})},T=function(){var e=Object(n.useContext)(i),t=e.userToken,a=e.loadingStatus,s=e.setLoadingStatus,r=Object(n.useState)([]),l=Object(o.a)(r,2),d=l[0],u=l[1];Object(n.useEffect)((function(){t.success&&g(t.success,t.id).then((function(e){u(e),s(!1)}))}),[t.success,t.id]);return Object(c.jsx)(c.Fragment,{children:t.success||localStorage.getItem("data")?Object(c.jsx)("div",{className:"container box",children:Object(c.jsxs)("div",{className:"row justify-content-center",children:[Object(c.jsx)(E,{handleNewOperation:function(e){u([].concat(Object(k.a)(d),[e]))}}),Object(c.jsx)(S,{operationsData:d,handleDeleteOperation:function(e){var t=Object(k.a)(d).filter((function(t){return t.id!==e.id}));u(t)},loadingStatus:a})]})}):Object(c.jsx)(j.a,{to:"/auth/login"})})},D=function(){return Object(c.jsx)("div",{className:"footer",children:Object(c.jsx)("footer",{className:" bg-dark py-4",children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"col text-center",children:[Object(c.jsx)("h5",{className:"text-white d-inline",children:"Created and designed by Daniela Vazquez - \xa92021"}),Object(c.jsx)("br",{}),Object(c.jsx)("label",{className:"text-white d-inline text-secondary",children:" Buenos Aires - Argentina "}),Object(c.jsx)("hr",{className:"w-50"})]})}),Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"col text-center",children:[Object(c.jsx)("a",{className:"nav-item nav-link d-inline text-white",href:"https://github.com/danielavazquez95",target:"_blank",children:Object(c.jsx)("i",{className:"fab fa-github"})}),Object(c.jsx)("a",{className:"nav-item nav-link d-inline text-white",href:"mailto:danielavazquez95@gmail.com",target:"_blank",children:Object(c.jsx)("i",{className:"far fa-envelope"})})]})})]})})})},q=(a(19),function(){var e=Object(n.useContext)(i).setUserToken;return Object(n.useEffect)((function(){localStorage.getItem("data")&&e(JSON.parse(localStorage.getItem("data")))}),[]),Object(c.jsxs)(l.a,{basename:"/",children:[Object(c.jsxs)("div",{className:"home-screen",children:[Object(c.jsx)(u,{}),Object(c.jsxs)(j.d,{children:[Object(c.jsx)(j.b,{path:"/auth",component:C}),Object(c.jsx)(j.b,{exact:!0,path:"/",component:T}),Object(c.jsx)(j.a,{to:"/auth"})]})]}),Object(c.jsx)(D,{})]})}),P=function(){var e=Object(n.useState)({}),t=Object(o.a)(e,2),a=t[0],s=t[1],r=Object(n.useState)(!0),l=Object(o.a)(r,2),j=l[0],d=l[1];return Object(c.jsx)(i.Provider,{value:{userToken:a,setUserToken:s,loadingStatus:j,setLoadingStatus:d},children:Object(c.jsx)(q,{})})};r.a.render(Object(c.jsx)(P,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.d192e6fb.chunk.js.map